<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Game of Life</title>
</head>
<body>
    <canvas id="gameOfLifeID" width="800" height="800"></canvas>
    <input type="range" name="res" id="resolutionId" min="10" max="100" value="20" step="5">
    <script>
        const resolutionDOM = document.querySelector("#resolutionId");
        const canvasDOM = document.querySelector("#gameOfLifeID");
        const canv = canvasDOM.getContext("2d");
        let resolution = 20;
        let cellSize = canvasDOM.width / resolution;
        let cells;
        let mouseClicked = false;
        
        cells = new Array(resolution * resolution);
        resolutionDOM.oninput = function() {
            resolution = this.value;
            cellSize = canvasDOM.width / resolution;
            cells = new Array(resolution * resolution);
            draw();
        }
        
        draw();
        
        canvasDOM.addEventListener('mousedown', (e) => {
            mouseClicked = true;
            drawCells(e);
        });
        canvasDOM.addEventListener('mouseup', () => mouseClicked = false);
        canvasDOM.addEventListener('mouseout', () => mouseClicked = false);
        canvasDOM.addEventListener('mousemove', drawCells);

        function draw() {
            canv.clearRect(0, 0, canvasDOM.width, canvasDOM.height);
            
            for(let i = 0; i < cells.length; i++) {
                cells[i] = 0;
                let x = i % resolution;
                let y = Math.floor(i / resolution);
                canv.beginPath();
                canv.lineWidth = "1";
                canv.strokeStyle = "black";
                canv.fillStyle = "black";
                canv.rect(x*cellSize+1, y*cellSize+1, cellSize-1, cellSize-1);
                canv.fill();
            }
        }

        function drawCells(e) {
            if(!mouseClicked) return;
            let xCoordinate = Math.floor(e.offsetX / cellSize);
            let yCoordinate = Math.floor(e.offsetY / cellSize);

            if(cells[xCoordinate + canvasDOM.width * yCoordinate] === 0) {
                cells[xCoordinate + canvasDOM.width * yCoordinate] = 1;
                canv.beginPath();
                canv.lineWidth = "1";
                canv.fillStyle = "black";
                canv.rect(xCoordinate*cellSize+1, yCoordinate*cellSize+1, cellSize, cellSize);
                canv.fill();
            } else {
                cells[xCoordinate + canvasDOM.width * yCoordinate] = 0;
                canv.beginPath();
                canv.lineWidth = "1";
                canv.fillStyle = "white";
                canv.rect(xCoordinate*cellSize+1, yCoordinate*cellSize+1, cellSize-1, cellSize-1);
                canv.fill();
            }

        }
    </script>
</body>
</html>